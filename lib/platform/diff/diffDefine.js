const babel=require("@babel/core"),traverse=require("@babel/traverse").default,generate=require("@babel/generator").default,platformMap={wx:{tagName:"WWTO_WX"},baidu:{tagName:"WWTO_BAIDU"},alipay:{tagName:"WWTO_ALIPAY"},tt:{tagName:"WWTO_TT"}};module.exports=function(e){const t=platformMap[e].tagName,n=[];n.push(t);const a=[];return Object.keys(platformMap).forEach(t=>{if(t!==e){const e=platformMap[t].tagName;a.push(e)}}),function(e){let t=n.concat(a);if(!(t=new RegExp(t.join("|"),"g")).test(e))return e;try{const t=babel.parse(e);return traverse(t,{enter(e){"IfStatement"===e.node.type&&e.node.test&&"Identifier"===e.node.test.type&&e.node.test.name&&a.indexOf(e.node.test.name)>=0&&e.node.consequent&&e.node.consequent.body&&(e.node.consequent.body=[],e.node.test.name="false"),"IfStatement"===e.node.type&&e.node.test&&"Identifier"===e.node.test.type&&e.node.test.name&&n.indexOf(e.node.test.name)>=0&&(e.node.test.name="true")}}),generate(t,{minified:!1},{}).code}catch(e){console.log(e)}return e}};