const gulp=require("gulp"),replace=require("gulp-replace"),config=require("../../config"),diffTag=require("../diff/index").diffTag("wx"),diffDefine=require("../diff/index").diffDefine("wx"),logger=require("../../utils/logger");function convert(e={}){const g=e.source||"./src",i=e.target||"./wx",s=e.assets||config.getAssets(g);console.log("likd-a",config.getAssets(g),g),gulp.src(s).pipe(gulp.dest(i)).on("end",()=>{logger.info("资源拷贝完成！")}),gulp.src(`${g}/**/*.wxss`).pipe(replace(/[\s\S]*/g,diffTag)).pipe(gulp.dest(i)).on("end",()=>{logger.info("微信：wxss文件编译完成！")}),gulp.src(`${g}/**/*.wxml`).pipe(replace(/[\s\S]*/g,diffTag)).pipe(gulp.dest(i)).on("end",()=>{logger.info("微信：wxml文件编译完成！")});const p=[`${g}/**/*.json`,`!${g}/**/package.json`];gulp.src(p).pipe(gulp.dest(i)).on("end",()=>{logger.info("微信：json文件编译完成！")}),gulp.src(`${g}/**/*.js`).pipe(replace(/[\s\S]*/g,diffTag)).pipe(replace(/[\s\S]*/g,diffDefine)).pipe(gulp.dest(i)).on("end",()=>{logger.info("微信：js文件编译完成！")})}module.exports=convert;