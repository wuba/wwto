const gulp=require("gulp"),replace=require("gulp-replace"),config=require("../../config"),diffTag=require("../diff/index").diffTag("wx"),logger=require("../../utils/logger");function convert(e={}){const g=e.source||"./src",p=e.target||"./wx",s=e.assets||config.getAssets(g);gulp.src(s).pipe(gulp.dest(p)).on("end",()=>{logger.info("资源拷贝完成！")}),gulp.src(`${g}/**/*.wxss`).pipe(replace(/[\s\S]*/g,diffTag)).pipe(gulp.dest(p)).on("end",()=>{logger.info("微信：wxss文件编译完成！")}),gulp.src(`${g}/**/*.wxml`).pipe(replace(/[\s\S]*/g,diffTag)).pipe(gulp.dest(p)).on("end",()=>{logger.info("微信：wxml文件编译完成！")});const r=[`${g}/**/*.json`];gulp.src(r).pipe(gulp.dest(p)).on("end",()=>{logger.info("微信：json文件编译完成！")}),gulp.src(`${g}/**/*.js`).pipe(replace(/[\s\S]*/g,diffTag)).pipe(gulp.dest(p)).on("end",()=>{logger.info("微信：js文件编译完成！")})}module.exports=convert;